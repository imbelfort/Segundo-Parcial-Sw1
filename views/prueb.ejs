<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>Proyecto</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      margin: 0;
      display: flex;
      height: 100vh;
      font-family: sans-serif;
    }

    canvas {
      background: white;
      border: 1px solid #ccc;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .canvas-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #ecf0f1;
      overflow: auto;
      padding: 10px;
    }

    .modern-toolbar,
    .modern-toolbar2 {
      position: fixed;
      top: 0;
      width: 220px;
      height: 100%;
      background: #2c3e50;
      color: white;
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 10px;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
    }

    .modern-toolbar {
      left: 0;
    }

    .modern-toolbar2 {
      right: 0;
    }

    .modern-toolbar button,
    .modern-toolbar2 button {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #34495e;
      color: white;
      border: none;
      padding: 8px;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }

    .modern-toolbar button:hover,
    .modern-toolbar2 button:hover {
      background: #3d566e;
    }

    .material-icons {
      font-size: 18px;
    }
  </style>
  <script defer src="script.js"></script>
</head>

<body>
  <div class="modern-toolbar">
    <label>Widget m칩vil</label>
    <button onclick="addElement('Title')"><span class="material-icons">title</span><span>Title</span></button>
    <button onclick="addElement('Subtitle')"><span class="material-icons">subtitles</span><span>Subtitle</span></button>
    <button onclick="addElement('Heading')"><span class="material-icons">format_size</span><span>Heading</span></button>
    <button onclick="addElement('Caption')"><span class="material-icons">notes</span><span>Caption</span></button>
    <button onclick="addElement('Button')"><span class="material-icons">smart_button</span><span>Button</span></button>
    <button onclick="addElement('Input')"><span class="material-icons">input</span><span>Input</span></button>
    <button onclick="addElement('Slider')"><span class="material-icons">tune</span><span>Slider</span></button>
    <button onclick="addElement('Switch')"><span class="material-icons">toggle_on</span><span>Switch</span></button>
    <button onclick="addElement('Checkbox')"><span class="material-icons">check_box</span><span>Checkbox</span></button>
    <button onclick="addElement('Dropdown')"><span
        class="material-icons">arrow_drop_down_circle</span><span>Dropdown</span></button>
    <button onclick="addElement('TextArea')"><span
        class="material-icons">text_fields</span><span>TextArea</span></button>
    <button onclick="addElement('Card')"><span class="material-icons">view_agenda</span><span>Card</span></button>
    <button onclick="addElement('AppBar')"><span class="material-icons">view_day</span><span>AppBar</span></button>
    <button onclick="addElement('TabBar')"><span class="material-icons">tab</span><span>TabBar</span></button>
    <button onclick="addElement('FAB')"><span class="material-icons">add_circle</span><span>FAB</span></button>
    <button onclick="addElement('Search')"><span class="material-icons">search</span><span>Search</span></button>
    <button onclick="addElement('NavigationRail')"><span
        class="material-icons">vertical_split</span><span>NavigationRail</span></button>
    <button onclick="addElement('DataTable')"><span
        class="material-icons">table_chart</span><span>DataTable</span></button>
  </div>

  <div class="canvas-container">
    <div id="canvas-selector">
      <button onclick="agregarNuevaPizarra()">+ Nueva Pizarra</button>
    </div>
    <div id="pizarras">
      <canvas class="pizarra" id="1" width="400" height="550"></canvas>
    </div>
  </div>

  <div class="modern-toolbar2">
    <label>Opciones</label>
    <button onclick="guardarCanvas()"><span class="material-icons">save</span><span>Guardar</span></button>
    <button id="btnGenerarCodigo"><span class="material-icons">code</span><span>Generar C칩digo</span></button>
    <h3>Boceto</h3>
    <input type="file" id="inputImagen" accept="image/*" style="display:none">
    <button id="btnCargar">Cargar Boceto</button>
    <img id="preview" src="" style="margin-top:10px; max-width:100%; display:none">
    <h3>Prompt</h3>
    <textarea id="prompt" rows="4" cols="50" placeholder="Escribe el prompt..."></textarea>
    <button id="btnGenerar">Generar</button>
  </div>


  <script src="/socket.io/socket.io.js"></script>
  <script src="/script.js"></script>

  <script>
    const inputImagen = document.getElementById('inputImagen');
    const btnCargar = document.getElementById('btnCargar');
    const preview = document.getElementById('preview');

    btnCargar.addEventListener('click', () => inputImagen.click());
    inputImagen.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = e => {
          preview.src = e.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        alert('Archivo inv치lido.');
      }
    });


    window.proyectoId = <%= proyect_id %>;


    if (window.proyectoId) {
      alert("Bienvenido bro");
    } else {
      alert("No se especific칩 proyecto (?id=)");
    }
  </script>
</body>

</html>